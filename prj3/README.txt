Νικόλας Νικολακόπουλος sdi1800133

Εργασία 3η:

ενδεικτικό Input:
./travelMonitorClient -m 3 -b 1024 -c 5 -s 100000 -i ./input_dir -t 10

έχω φτιάξει Makefile.

Η εργασία αυτή βασίζεται σε μεγάλο βαθμό στις προηγούμενες. Αλλαγές έγιναν στο αρχείο 
pipes.c, στο οποίο αντί για fifo's, πλέον χρησιμοποιούμε sockets. Ακόμα, έφτιαξα το αρχείο
cyclic.c στο οποίο υπάρχει κώδικας για το cyclic buffer, για τη σωστή διαχείριση του
με mutexes , cond vars κτλ. 

Η λογική για την επικοινωνία των διεργασιών είναι η ακόλουθη:
ο travelMonitorClient λειτουργεί σαν client και κάνει connect στον monitor όταν χρειαστεί 
να στείλει ένα μήνυμα. Για κάθε μήνυμα κάνουμε νέο connection και συνεπώς έχουμε νέους
descriptors τους οποίους και πρέπει να κλείνουμε όταν τελειώνουμε με την μετάδοση του
εκάστοτε μηνύματος. Επειδή όλες οι διεργασίες τρέχουν στο ίδιο μηχάνημα έχω βάλει 
για διεύθυνση, την διεύθυνση του μηχανήματος. Πάντως αν συμμετείχαν πολλά μηχανήματα 
θα μπορούσαμε να βάλουμε IN_ADDRANY να δέχονται οι Servers μηνύματα από οποιοδήποτε μηχάνημα.

Για τον cyclic buffer έχω ένα Mutex και 2 condition variables. Η χρήση του Mutex είναι
προφανής. Το πρώτο cond variable χρησιμοποιείται για να γίνονται suspend πάνω του
τα threads που θέλουν να πάρουν ένα Path από το buffer, αλλά ο buffer είναι κενός.
Ομοίως, το άλλο cond var χρησιμοποιείται με ανάλογο τρόπο, όταν ο buffer είναι γεμάτος
και δεν έχει χώρο για να προστεθούν paths στον buffer.
Για την διαγραφή τους, στέλνεται ένα Path με τιμή NULL στον buffer για κάθε thread 
και αν το ανιχνεύσει αυτό το path το thread, τότε τερματίζει. ΄Επειτα, διαγράφω τα mutex
και cond vars.

